{% extends "base.html" %}

{% load static %}

{% block style %}
  <link rel="stylesheet" href="{% static "diaries/style.css" %}">
{% endblock style %}

{% block content %}
  <h1>ì¼ê¸°ì¥</h1>
  <a href="{% url "diaries:create" %}">[ì¼ê¸° ì“°ê¸°]</a>
  <ul class="diaries">
    {% for diary in diaries %}
    <article class="diaries-main">
      <li>
        <p>ì‘ì„±ì¼ : {{ diary.created_at }}</p>
        {% if diary.picture %}
          <img src="{{ diary.picture.url }}" alt="{{ diary.picture }}">
        {% else %}
          <img src="{% static "diaries/default.png" %}" alt="{{ diary.picture }}">
        {% endif %}
        <p>{{ diary.content }}</p>
        <form action="{% url "diaries:likes" diary.pk %}" method="POST">
          {% csrf_token %}
          {% if request.user in diary.like_users.all %}
            <input type="submit" value="â¤">
          {% else %}
            <input type="submit" value="ğŸ¤">
          {% endif %}
        </form>
      </li>
      
      <section class="diaries-comment">
        <ul>
          {% for comment in diary.comment_set.all %}
            <li>
              <span>{{ comment.pk }} | {{ comment.content }}</span>
              <form action="{% url "diaries:comments_delete" comment.pk %}" method="POST">
                {% csrf_token %}
                <input type="submit" value="ëŒ“ê¸€ ì‚­ì œ">
              </form>
            </li>
          {% empty %}
            <li>
              <span>ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”.</span>
            </li>
          {% endfor %}
        </ul>
        <form action="{% url "diaries:comments_create" diary.pk %}" method="POST">
          {% csrf_token %}
          {{ comment_form.as_p }}
          <input type="submit" value="ëŒ“ê¸€ ìƒì„±">
        </form>
      </section>
      
    </article>
    {% empty %}
      <li>ì•„ì§ ì‘ì„±í•œ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</li>
    {% endfor %}
  </ul>
{% endblock content %}